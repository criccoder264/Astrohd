<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@criccoder</title>
  <link rel="stylesheet" href="https://cxh.pages.dev/style.css">
</head>
<body>
<!-- Fullscreen Video CSS -->
<style>
  #player {
    position: absolute;
    width: 100% !important;
    height: 100% !important;
  }
</style>

<!-- Player -->
<div id="player"></div>
<script src='https://content.jwplatform.com/libraries/KB5zFt7A.js'></script>
<script>
 // Domain Lock (restrict to specific domains)
  const allowedDomains = ['https://criccoder264.pages.dev/test', 'https://criccoder264.pages.dev'];

  // Check if the current domain is allowed
  const currentDomain = window.location.hostname;
  if (!allowedDomains.includes(currentDomain)) {
    alert('This content is not available on your domain.');
    window.location.href = "https://telegram.me/criccoder"; // Redirect to a different page or show a message
  }

  // Fetch the video configuration from the PHP file based on the 'id' parameter in the URL
  const urlParams = new URLSearchParams(window.location.search);
  const streamId = urlParams.get('id') || '1';  // Default to '1' if 'id' is not found in URL

  // Construct the URL to fetch the configuration dynamically from your PHP file
  const videoConfigUrl = `https://shz.al/GRfb.php?id=${streamId}`;

  // Fetch the video configuration from the PHP backend
  fetch(videoConfigUrl)
    .then(response => response.json())
    .then(videoConfig => {
      // Initialize JW Player with the selected stream URL
      const playerInstance = jwplayer("player").setup({
        file: videoConfig.url,  // Use the video URL from the PHP-configured JSON response
        controls: true,
        displaytitle: true,
        autoplay: true,    
        displaydescription: true,
        abouttext: "",
        aboutlink: "https://telegram.me/Criccoder",  // Updated Telegram channel link
        skin: {
          name: "netflix"
        },
        logo: {
          file: "",
          link: "https://telegram.me/Criccoder"  // Updated Telegram channel link
        },
        captions: {
          color: "#FFF",
          fontSize: 14,
          backgroundOpacity: 0,
          edgeStyle: "raised"
        },
        playlist: [
          {
            image: "",
            sources: [
              {
                file: videoConfig.url,  // Use the video URL from the PHP-configured JSON response
                label: "1080p",
                default: true
              }
            ],
          }
        ],
        advertising: {
          client: "vast",
          schedule: [
            {
              offset: "pre",
              tag: ""
            }
          ]
        }
      });

      playerInstance.on("ready", function () {
        const playerContainer = playerInstance.getContainer();
        const buttonContainer = playerContainer.querySelector(".jw-button-container");

        // Rewind button functionality
        const rewindContainer = playerContainer.querySelector(".jw-display-icon-rewind");
        const rewindButton = rewindContainer.cloneNode(true);
        const rewindIcon = rewindButton.querySelector(".jw-icon-rewind");
        rewindIcon.style.transform = "scaleX(1)";
        rewindIcon.ariaLabel = "Rewind 5 Seconds";

        const nextContainer = playerContainer.querySelector(".jw-display-icon-next");
        nextContainer.parentNode.insertBefore(rewindButton, nextContainer);

        // Rewind functionality for the control bar
        const rewindControlBarButton = buttonContainer.querySelector(".jw-icon-rewind");
        const rewindControlBarClone = rewindControlBarButton.cloneNode(true);
        rewindControlBarClone.style.transform = "scaleX(1)";
        rewindControlBarClone.ariaLabel = "Rewind 5 Seconds";
        buttonContainer.insertBefore(rewindControlBarClone, buttonContainer.firstChild);

        // On click of rewind button, seek backward by 5 seconds
        [rewindButton, rewindControlBarClone].forEach((button) => {
          button.onclick = () => {
            const currentPosition = playerInstance.getPosition();
            const newPosition = Math.max(currentPosition - 5, 0); // Prevent going below 0
            playerInstance.seek(newPosition);
          };
        });

        // Detect adblock
        playerInstance.on("adBlock", () => {
          const modal = document.querySelector("div.modal");
          modal.style.display = "flex";
          document
            .getElementById("close")
            .addEventListener("click", () => location.reload());
        });
      });

      // Confirmation message for joining Telegram channel
      var a = confirm("Join For More Links!!");
      if (a == true) {
        window.location.href = "https://telegram.me/Criccoder";  // Updated Telegram channel link
      }

      function welcome() {
        window.open("https://telegram.me/Criccoder");  // Updated Telegram channel link
      }

      if (window.top !== window.self) {
        window.addEventListener('DOMContentLoaded', function() {
          document.body.innerHTML = '<div id="message">Copy Karna Buri Baar hai</div>';
        });
      }

    })
    .catch(error => {
      console.error("Error fetching video config:", error);
    });
</script>

<script disable-devtool-auto='true' src='https://cdn.jsdelivr.net/npm/disable-devtool' clear-log='true' disable-select='true' disable-copy='true' disable-cut='true' disable-paste='true'></script>
</body>
</html>
